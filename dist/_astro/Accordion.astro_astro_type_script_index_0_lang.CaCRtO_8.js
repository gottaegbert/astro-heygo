class c{accordion;type;items;itemsByValue;accordionId;constructor(t,e){this.accordion=t,this.type=t.dataset.type||"single",this.accordionId=`starwind-accordion${e}`,this.items=this.initializeItems(),this.itemsByValue=new Map(this.items.map(s=>[s.value,s])),this.setupItems(),this.setInitialState()}initializeItems(){return Array.from(this.accordion.querySelectorAll(".starwind-accordion-item")).map((t,e)=>{const s=t.querySelector(".starwind-accordion-trigger"),i=t.querySelector(".starwind-accordion-content"),r=t.getAttribute("data-value")||String(e);return!s||!i?null:{element:t,trigger:s,content:i,value:r}}).filter(t=>t!==null)}setupItems(){this.items.forEach((t,e)=>{this.setupAccessibility(t,e),this.setContentHeight(t.content),this.setupEventListeners(t)})}setupAccessibility(t,e){const s=`${this.accordionId}-t${e}`,i=`${this.accordionId}-c${e}`;t.trigger.id=s,t.trigger.setAttribute("aria-controls",i),t.trigger.setAttribute("aria-expanded","false"),t.content.id=i,t.content.setAttribute("aria-labelledby",s),t.content.setAttribute("role","region")}setContentHeight(t){const e=t.firstElementChild;if(e){const s=e.getBoundingClientRect().height;t.style.setProperty("--starwind-accordion-content-height",`${s}px`)}}setInitialState(){const t=this.accordion.dataset.value;if(t){const e=this.itemsByValue.get(t);e&&this.setItemState(e,!0)}}setupEventListeners(t){t.trigger.addEventListener("click",()=>this.handleClick(t)),t.trigger.addEventListener("keydown",e=>this.handleKeyDown(e,t))}handleClick(t){const e=t.element.getAttribute("data-state")==="open";this.toggleItem(t,!e)}handleKeyDown(t,e){const s=this.items.indexOf(e),r={ArrowDown:()=>this.focusItem(s+1),ArrowUp:()=>this.focusItem(s-1),Home:()=>this.focusItem(0),End:()=>this.focusItem(this.items.length-1)}[t.key];r&&(t.preventDefault(),r())}focusItem(t){const e=(t+this.items.length)%this.items.length;this.items[e].trigger.focus()}toggleItem(t,e){this.type==="single"&&e&&this.items.forEach(s=>{s!==t&&s.element.getAttribute("data-state")==="open"&&this.setItemState(s,!1)}),this.setItemState(t,e)}setItemState(t,e){const s=e?"open":"closed";e&&t.content.style.removeProperty("animation"),this.setContentHeight(t.content),t.element.setAttribute("data-state",s),t.content.setAttribute("data-state",s),t.trigger.setAttribute("data-state",s),t.trigger.setAttribute("aria-expanded",e.toString())}}const o=new WeakMap,a=()=>{document.querySelectorAll(".starwind-accordion").forEach((n,t)=>{o.has(n)||o.set(n,new c(n,t))})};a();document.addEventListener("astro:after-swap",a);
