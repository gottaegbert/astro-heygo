import{c as N}from"./simplex-noise.CZbXB3Em.js";const f={color:"hsl(0, 0%, 100%)",arcSpeed:.02,amplitude:1.5,lineWidth:1,blur:60,blurColor:"hsl(217, 91%, 60%)",childNum:2,inset:65,circleSpeed:.003};function o(t,i){this.x=t||0,this.y=i||0}function M(t,i,e){o.call(this,t,i),this.radius=e||7,this.vec=new o(m(1,-1),m(1,-1)).normalize(),this._easeRadius=this.radius,this._currentRadius=this.radius}function b(t,i,e){this.startPoint=t||new o,this.endPoint=i||new o,this.step=e||35,this.children=[]}function q(t,i,e,s){const n=f.inset;this.x=(void 0!==t?t:0)+n,this.y=(void 0!==i?i:0)+n,this.width=(void 0!==e?e:0)-2*n,this.height=(void 0!==s?s:0)-2*n,this.right=this.x+this.width,this.bottom=this.y+this.height}function m(t,i){return"number"!=typeof t?Math.random():("number"!=typeof i&&(i=0),Math.random()*(t-i)+i)}function _(t,i){return t?0|m(t+1,i):0}function I(){var t,i,e,s,n,h,r,a;function u(){if(!t)return;const u=t.getBoundingClientRect();t.width=u.width,t.height=u.height,e=.5*t.width,s=.5*t.height,i=t.getContext("2d");const l=t.width/2-f.inset;h=new q(0,0,t.width,t.height),n=new o,a=new b,r=[new M(e-l,s,1.25*a.lineWidth),new M(e+l,s,1.25*a.lineWidth)],a.startPoint.set(r[0]),a.endPoint.set(r[1]),a.setChildNum(f.childNum)}t=document.getElementById("lightning"),window.addEventListener("resize",u,!1),u();var l=function(){if(t){var e,s,o;for(i.save(),i.fillStyle=undefined,i.clearRect(0,0,t.width,t.height),i.restore(),a.startPoint.set(r[0]),a.endPoint.set(r[1]),a.step=Math.ceil(a.length()/10),a.step<5&&(a.step=5),a.update(),a.draw(i),o=r[0].distanceTo(r[1]).toFixed(0),e=0;e<2;e++)(s=r[e]).dragging&&s.drag(n),s.update(r,h,o/2),s.draw(i);requestAnimationFrame(l)}};l()}window.requestAnimationFrame=window.requestAnimationFrame||function(t){window.setTimeout(t,1e3/60)},o.add=function(t,i){return new o(t.x+i.x,t.y+i.y)},o.sub=function(t,i){return new o(t.x-i.x,t.y-i.y)},o.prototype={set:function(t,i){return"object"==typeof t&&(i=t.y,t=t.x),this.x=t||0,this.y=i||0,this},add:function(t){return this.x+=t.x,this.y+=t.y,this},sub:function(t){return this.x-=t.x,this.y-=t.y,this},scale:function(t){return this.x*=t,this.y*=t,this},length:function(){return Math.sqrt(this.x*this.x+this.y*this.y)},normalize:function(){var t=Math.sqrt(this.x*this.x+this.y*this.y);return t&&(this.x/=t,this.y/=t),this},angle:function(){return Math.atan2(this.y,this.x)},distanceTo:function(t){var i=t.x-this.x,e=t.y-this.y;return Math.sqrt(i*i+e*e)},distanceToSq:function(t){var i=t.x-this.x,e=t.y-this.y;return i*i+e*e},clone:function(){return new o(this.x,this.y)}},M.prototype=function(t){var i,e=new o(0,0);for(i in t)e[i]=t[i];return e}({color:f.color,dragging:!1,_latestDrag:null,update:function(t,i,e){if(this._currentRadius=m(this._easeRadius,.35*this._easeRadius),this._easeRadius+=.1*(this.radius-this._easeRadius),!this.dragging){this.vec;{const t=i.x+.5*i.width,s=i.y+.5*i.height,n=Math.atan2(this.y-s,this.x-t)+f.circleSpeed;this.x=t+Math.cos(n)*e,this.y=s+Math.sin(n)*e}}},hitTest:function(t){return this.distanceToSq(t)<900&&(this._easeRadius=2.5*this.radius,!0)},startDrag:function(){this.dragging=!0,this.vec.set(0,0),this._latestDrag=(new o).set(this)},drag:function(t){this._latestDrag.set(this),this.set(t)},endDrag:function(){this.vec=o.sub(this,this._latestDrag),this.dragging=!1},draw:function(t){t.save(),t.fillStyle=this.color,t.beginPath(),t.arc(this.x,this.y,this._currentRadius,0,2*Math.PI,!1),t.fill(),t.shadowBlur=20,t.shadowColor=this.color,t.fillStyle="rgba(0, 0, 0, 1)",t.globalCompositeOperation="lighter",t.beginPath(),t.arc(this.x,this.y,this._currentRadius,0,2*Math.PI,!1),t.fill(),t.restore()}}),b.prototype={color:f.color,arcSpeed:f.arcSpeed,amplitude:f.amplitude,lineWidth:f.lineWidth,blur:f.blur,blurColor:f.blurColor,points:null,off:0,_simplexNoise:N(),parent:null,startStep:0,endStep:0,length:function(){return this.startPoint.distanceTo(this.endPoint)},getChildNum:function(){return this.children.length},setChildNum:function(t){var i,e,s,n=this.children;if((s=this.children.length)>t){for(e=t;e<s;e++)n[e].dispose();n.splice(t,s-t)}else for(e=s;e<t;e++)(i=new b)._setAsChild(this),n.push(i)},update:function(){var t,i,e,s,n,h,r,a,u,l,d,c,f,p,g,y,w,x,b,_,S,v,M=this.startPoint,P=this.endPoint;for(this.parent&&(this.endStep>this.parent.step&&this._updateStepsByParent(),M.set(this.parent.points[this.startStep]),P.set(this.parent.points[this.endStep])),t=this.length(),e=(i=o.sub(P,M).normalize().scale(t/this.step)).angle(),s=Math.sin(e),n=Math.cos(e),h=this.points=[],r=this.off+=m(this.arcSpeed,.2*this.arcSpeed),(a=(this.parent?1.5*t:t)*this.amplitude)>750&&(a=750),S=0,v=this.step+1;S<v;S++)u=S/60,d=s*(l=a*this._noise(u-r,0)*.5),c=n*l,p=s*(f=a*this._noise(u+r,0)*.5),g=n*f,y=Math.sin(Math.PI*(S/(v-1))),w=M.x+i.x*S+(d-p)*y,x=M.y+i.y*S-(c-g)*y,h.push(new o(w,x));for(S=0,v=(b=this.children).length;S<v;S++)(_=b[S]).color=this.color,_.arcSpeed=1.35*this.arcSpeed,_.amplitude=this.amplitude,_.lineWidth=.75*this.lineWidth,_.blur=this.blur,_.blurColor=this.blurColor,b[S].update()},draw:function(t){var i,e,s,n,h=this.points,r=this.children;if(this.blur){for(t.save(),t.globalCompositeOperation="lighter",t.fillStyle="rgba(0, 0, 0, 1)",t.shadowBlur=this.blur,t.shadowColor=this.blurColor,t.beginPath(),i=0,e=h.length;i<e;i++)s=h[i],n=e>1?s.distanceTo(h[i===e-1?i-1:i+1]):0,t.moveTo(s.x+n,s.y),t.arc(s.x,s.y,n,0,2*Math.PI,!1);t.fill(),t.restore()}for(t.save(),t.lineWidth=m(this.lineWidth,.5),t.strokeStyle=this.color,t.beginPath(),i=0,e=h.length;i<e;i++)s=h[i],t[0===i?"moveTo":"lineTo"](s.x,s.y);for(t.stroke(),t.restore(),i=0,e=this.children.length;i<e;i++)r[i].draw(t)},dispose:function(){this._timeoutId&&clearTimeout(this._timeoutId),this._simplexNoise=null},_noise:function(t){var i,e=1,s=1,n=0;for(i=0;i<6;++i)n+=(e*=.5)*(this._simplexNoise(t*s,0)+1)*.5,s*=2;return n},_setAsChild:function(t){if(t instanceof b){this.parent=t;var i=this,e=function(){i._updateStepsByParent(),i._timeoutId=setTimeout(e,_(1500))};i._timeoutId=setTimeout(e,_(1500))}},_updateStepsByParent:function(){if(this.parent){var t=this.parent.step;this.startStep=_(t-2),this.endStep=this.startStep+_(t-this.startStep-2)+2,this.step=this.endStep-this.startStep}}},setTimeout(I,1e3),document.addEventListener("astro:after-swap",I);