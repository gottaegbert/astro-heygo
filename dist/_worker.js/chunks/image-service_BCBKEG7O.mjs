globalThis.process??={},globalThis.process.env??={};import{i as isRemotePath,j as joinPaths}from"./internal_q0A1Q6b1.mjs";import{b as baseService}from"./_astro_assets_C6fy9Ytj.mjs";import"./astro/server_8e5-x8mo.mjs";function isESMImportedImage(t){return"object"==typeof t}function matchHostname(t,e,r){if(!e)return!0;if(!r||!e.startsWith("*"))return e===t.hostname;if(e.startsWith("**.")){const r=e.slice(2);return r!==t.hostname&&t.hostname.endsWith(r)}if(e.startsWith("*.")){const r=e.slice(1);return 1===t.hostname.replace(r,"").split(".").filter(Boolean).length}return!1}function matchPort(t,e){return!e||e===t.port}function matchProtocol(t,e){return!e||e===t.protocol.slice(0,-1)}function matchPathname(t,e,r){if(!e)return!0;if(!e.endsWith("*"))return e===t.pathname;if(e.endsWith("/**")){const r=e.slice(0,-2);return r!==t.pathname&&t.pathname.startsWith(r)}if(e.endsWith("/*")){const r=e.slice(0,-1);return 1===t.pathname.replace(r,"").split("/").filter(Boolean).length}return!1}function matchPattern(t,e){return matchProtocol(t,e.protocol)&&matchHostname(t,e.hostname,!0)&&matchPort(t,e.port)&&matchPathname(t,e.pathname)}function isRemoteAllowed(t,{domains:e=[],remotePatterns:r=[]}){if(!isRemotePath(t))return!1;const s=new URL(t);return e.some((t=>matchHostname(s,t)))||r.some((t=>matchPattern(s,t)))}const __vite_import_meta_env__={ASSETS_PREFIX:void 0,BASE_URL:"/",DEV:!1,MODE:"production",PROD:!0,SITE:"https://amplify.cosmicthemes.com",SSR:!0},service={...baseService,getURL:(t,e)=>{const r=["onerror=redirect"];t.width&&r.push(`width=${t.width}`),t.height&&r.push(`height=${t.height}`),t.quality&&r.push(`quality=${t.quality}`),t.fit&&r.push(`fit=${t.fit}`),t.format&&r.push(`format=${t.format}`);let s="";if(isESMImportedImage(t.src))s=t.src.src;else{if(!isRemoteAllowed(t.src,e))return t.src;s=t.src}return joinPaths(Object.assign(__vite_import_meta_env__,{_:process.env._}).BASE_URL,"/cdn-cgi/image",r.join(","),s)}};var image_service_default=service;export{image_service_default as default};